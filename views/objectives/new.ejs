<% layout('layouts/dashboard') %>
<% title = 'Add Objective' %>

<h2>&#x1F3AF; Add Objective</h2>

<form action="/<%= orgName %>/objectives" method="POST">
  <div class="mb-3">
    <label for="title">Objective Title <span class="text-danger">*</span></label>
    <input type="text" name="title" id="title" class="form-control" required placeholder="e.g., Improve customer satisfaction">
  </div>

  <div class="mb-3">
    <label for="description">Description</label>
    <textarea name="description" id="description" class="form-control" rows="3" placeholder="Brief description of this objective"></textarea>
  </div>

  <div class="mb-3">
    <label for="cycle">OKR Cycle <span class="text-danger">*</span></label>
    <select name="cycle" id="cycle" class="form-control" required>
      <option value="">-- Select a cycle --</option>
      <% enabledCycles.forEach(cycle => { %>
        <option value="<%= cycle.label %>"><%= cycle.label %></option>
      <% }) %>
    </select>
    <small class="text-muted">Only enabled cycles are shown</small>
  </div>

  <div class="mb-3">
    <label for="teamId">Team <span class="text-danger">*</span></label>
    <select name="teamId" id="teamId" class="form-control" required>
      <% teams.forEach(team => { %>
        <option value="<%= team._id %>"><%= team.name %></option>
      <% }) %>
    </select>
  </div>

  <div class="mb-3">
    <label for="parentObjective">Parent Objective (Optional)</label>
    <select name="parentObjective" id="parentObjective" class="form-control">
      <option value="">-- None --</option>
      <% parentObjectives.forEach(obj => { %>
        <option value="<%= obj._id %>"><%= obj.title %></option>
      <% }) %>
    </select>
  </div>

  <button type="submit" class="btn btn-success mt-3">✅ Save Objective</button>
</form>

<a href="/<%= orgName %>/objectives" class="btn btn-outline-secondary mt-2">⬅ Back to Objectives</a>