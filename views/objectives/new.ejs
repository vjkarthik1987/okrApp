<% layout('layouts/dashboard') %>
<% title = 'Add Objective' %>

<h2 class="mb-4">ğŸ¯ Add New Objective</h2>

<form action="/<%= orgName %>/objectives" method="POST" class="animated-form">

  <div class="mb-3">
    <label for="title" class="form-label funky-label">ğŸ·ï¸ Objective Title <span class="text-danger">*</span></label>
    <input type="text" name="title" id="title" class="form-control input-pop" required placeholder="e.g., Improve customer satisfaction">
  </div>

  <div class="mb-3">
    <label for="description" class="form-label funky-label">ğŸ“ Description</label>
    <textarea name="description" id="description" class="form-control input-pop" rows="3" placeholder="Brief description of this objective"></textarea>
  </div>

  <div class="mb-3">
    <label for="cycle" class="form-label funky-label">ğŸ“† OKR Cycle(s) <span class="text-danger">*</span></label>
    <select name="cycle" id="cycle" class="form-select input-pop" multiple required>
      <% enabledCycles.forEach(cycle => { %>
        <option value="<%= cycle.label %>"><%= cycle.label %></option>
      <% }) %>
    </select>
    <small class="text-muted">Hold Ctrl (Windows) / Command (Mac) to select multiple cycles.</small>
  </div>

  <div class="mb-3">
    <label for="teamId" class="form-label funky-label">ğŸ‘¥ Owning Team <span class="text-danger">*</span></label>
    <select name="teamId" id="teamId" class="form-select input-pop" required>
      <% teams.forEach(team => { %>
        <option value="<%= team._id %>"><%= team.name %></option>
      <% }) %>
    </select>
  </div>

  <div class="mb-3">
    <label for="assignedTeams" class="form-label funky-label">ğŸ¤ Assigned Teams</label>
    <select name="assignedTeams" id="assignedTeams" class="form-select input-pop" multiple>
      <% teams.forEach(team => { %>
        <option value="<%= team._id %>"><%= team.name %></option>
      <% }) %>
    </select>
    <small class="text-muted">Hold Ctrl (Windows) / Command (Mac) to select multiple teams.<br>
    If left blank, the creating team is automatically assigned.</small>
  </div>

  <div class="mb-3">
    <label for="parentObjective" class="form-label funky-label">ğŸ“Œ Parent Objective</label>
    <select name="parentObjective" id="parentObjective" class="form-select input-pop">
      <option value="">â€” None â€”</option>
      <% parentObjectives.forEach(obj => { %>
        <option value="<%= obj._id %>"><%= obj.title %></option>
      <% }) %>
    </select>
  </div>

  <button type="submit" class="btn btn-success mt-3">ğŸš€ Create Objective</button>
</form>

<a href="/<%= orgName %>/objectives" class="btn btn-outline-secondary mt-3">â¬… Back to Objectives</a>
